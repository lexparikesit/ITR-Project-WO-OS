{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/web-ops/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { TextInput, PasswordInput, Button, Paper, Title, Stack, Text, Anchor, Group, Container } from \"@mantine/core\";\r\nimport axios from \"axios\";\r\n\r\nconst schema = z.object({\r\n  username: z.string().min(1, \"Username wajib diisi\"),\r\n  password: z.string().min(1, \"Password wajib diisi\"),\r\n});\r\ntype FormValues = z.infer<typeof schema>;\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const { register, handleSubmit, formState: { errors, isSubmitting } } = useForm<FormValues>({\r\n    resolver: zodResolver(schema),\r\n    defaultValues: { username: \"\", password: \"\" },\r\n  });\r\n\r\n  const onSubmit = async (values: FormValues) => {\r\n    setError(null);\r\n    try {\r\n      const res = await axios.post(\"/api/auth/login\", values);\r\n      if (res.data?.success) {\r\n        const next = params.get(\"redirect\") || \"/cases\";\r\n        router.replace(next);\r\n      } else {\r\n        setError(\"Login gagal\");\r\n      }\r\n    } catch (e: any) {\r\n      setError(e?.response?.data?.message || \"Login gagal\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container size={420} py=\"xl\">\r\n      <Title order={2} ta=\"center\">Masuk</Title>\r\n      <Text c=\"dimmed\" size=\"sm\" ta=\"center\" mt=\"xs\">\r\n        Demo user: <b>admin/admin123</b> atau <b>leo/indotruck</b>\r\n      </Text>\r\n\r\n      <Paper withBorder shadow=\"sm\" p=\"lg\" mt=\"md\" radius=\"md\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <Stack>\r\n            <TextInput\r\n              label=\"Username\"\r\n              placeholder=\"username\"\r\n              {...register(\"username\")}\r\n              error={errors.username?.message}\r\n              autoComplete=\"username\"\r\n            />\r\n            <PasswordInput\r\n              label=\"Password\"\r\n              placeholder=\"••••••••\"\r\n              {...register(\"password\")}\r\n              error={errors.password?.message}\r\n              autoComplete=\"current-password\"\r\n            />\r\n            {error && <Text c=\"red\">{error}</Text>}\r\n            <Button type=\"submit\" loading={isSubmitting}>Masuk</Button>\r\n          </Stack>\r\n        </form>\r\n        <Group justify=\"apart\" mt=\"md\">\r\n          <Anchor size=\"sm\" c=\"dimmed\" href=\"/\">Kembali</Anchor>\r\n        </Group>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AARA;;;;;;;;;AAUA,MAAM,SAAS,kLAAC,CAAC,MAAM,CAAC;IACtB,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAGe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,SAAS,IAAA,qJAAe;IAC9B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,IAAA,yKAAO,EAAa;QAC1F,UAAU,IAAA,6KAAW,EAAC;QACtB,eAAe;YAAE,UAAU;YAAI,UAAU;QAAG;IAC9C;IAEA,MAAM,WAAW,OAAO;QACtB,SAAS;QACT,IAAI;YACF,MAAM,MAAM,MAAM,gJAAK,CAAC,IAAI,CAAC,mBAAmB;YAChD,IAAI,IAAI,IAAI,EAAE,SAAS;gBACrB,MAAM,OAAO,OAAO,GAAG,CAAC,eAAe;gBACvC,OAAO,OAAO,CAAC;YACjB,OAAO;gBACL,SAAS;YACX;QACF,EAAE,OAAO,GAAQ;YACf,SAAS,GAAG,UAAU,MAAM,WAAW;QACzC;IACF;IAEA,qBACE,8OAAC,8LAAS;QAAC,MAAM;QAAK,IAAG;;0BACvB,8OAAC,kLAAK;gBAAC,OAAO;gBAAG,IAAG;0BAAS;;;;;;0BAC7B,8OAAC,+KAAI;gBAAC,GAAE;gBAAS,MAAK;gBAAK,IAAG;gBAAS,IAAG;;oBAAK;kCAClC,8OAAC;kCAAE;;;;;;oBAAkB;kCAAM,8OAAC;kCAAE;;;;;;;;;;;;0BAG3C,8OAAC,kLAAK;gBAAC,UAAU;gBAAC,QAAO;gBAAK,GAAE;gBAAK,IAAG;gBAAK,QAAO;;kCAClD,8OAAC;wBAAK,UAAU,aAAa;kCAC3B,cAAA,8OAAC,kLAAK;;8CACJ,8OAAC,8LAAS;oCACR,OAAM;oCACN,aAAY;oCACX,GAAG,SAAS,WAAW;oCACxB,OAAO,OAAO,QAAQ,EAAE;oCACxB,cAAa;;;;;;8CAEf,8OAAC,0MAAa;oCACZ,OAAM;oCACN,aAAY;oCACX,GAAG,SAAS,WAAW;oCACxB,OAAO,OAAO,QAAQ,EAAE;oCACxB,cAAa;;;;;;gCAEd,uBAAS,8OAAC,+KAAI;oCAAC,GAAE;8CAAO;;;;;;8CACzB,8OAAC,qLAAM;oCAAC,MAAK;oCAAS,SAAS;8CAAc;;;;;;;;;;;;;;;;;kCAGjD,8OAAC,kLAAK;wBAAC,SAAQ;wBAAQ,IAAG;kCACxB,cAAA,8OAAC,qLAAM;4BAAC,MAAK;4BAAK,GAAE;4BAAS,MAAK;sCAAI;;;;;;;;;;;;;;;;;;;;;;;AAKhD","debugId":null}}]
}